# æ•°å­—å­ªç”Ÿæ•°æ®æ¨¡æ‹Ÿå™¨ - ä»»åŠ¡å®ŒæˆæŠ¥å‘Š

## æ‰§è¡Œæ¦‚è§ˆ

âœ… **ä»»åŠ¡çŠ¶æ€**: æˆåŠŸå®Œæˆ  
ğŸ“Š **ç”Ÿæˆæ•°æ®é‡**: 1,971æ¡ModalDataè®°å½•  
ğŸ“ **è¾“å‡ºæ–‡ä»¶**: modaldata_instances.json (1.92 MB)  
â±ï¸ **ç”Ÿæˆæ—¶é—´**: 2025-10-29

---

## ä»»åŠ¡æ‰§è¡Œæµç¨‹

### 1. æ•°æ®åˆ†æé˜¶æ®µ
åˆ†æäº†ä»¥ä¸‹è¾“å…¥æ–‡ä»¶:
- âœ… `scenes_for_M670-SN001.json` - 39ä¸ªåœºæ™¯
- âœ… `scenes_for_M803-SN001.json` - 39ä¸ªåœºæ™¯  
- âœ… `ModalityBinding_Instances.json` - 352ä¸ªç»‘å®šå…³ç³»
- âœ… `Modality_Instances_Complete.json` - 40ç§æ•°æ®æ¨¡æ€ç±»å‹
- âœ… å…¶ä»–å…ƒæ•°æ®æ–‡ä»¶ (MBOM, è®¾å¤‡å®ä¾‹ç­‰)

### 2. æ ¸å¿ƒç”Ÿæˆé€»è¾‘

éµå¾ª"æ¡æ‰‹åè®®"(The Handshake)åŸåˆ™:

```
å¯¹äºæ¯ä¸ªProcessçº§åˆ«çš„Scene:
  1. è¯†åˆ«åœºæ™¯çš„æ—¶é—´çª—å£ (timeFrame)
  2. é€‰æ‹©å‚ä¸è¯¥åœºæ™¯çš„TwinObject (è®¾å¤‡)
  3. æŸ¥è¯¢ModalityBindingç¡®è®¤è®¾å¤‡èƒ½åŠ›
  4. å½“TwinObject + ModalityåŒ¹é…æ—¶:
     - ç”Ÿæˆ3-5æ¡ModalDataè®°å½•
     - æ—¶é—´æˆ³éšæœºåˆ†å¸ƒåœ¨åœºæ™¯æ—¶é—´èŒƒå›´å†…
     - æ•°å€¼ç¬¦åˆModalityçš„allowedRange
```

### 3. æ•°æ®ç”Ÿæˆç»Ÿè®¡

#### æŒ‰åœºæ™¯ç±»å‹
- **Processåœºæ™¯**: 54ä¸ª (M670: 27ä¸ª, M803: 27ä¸ª)
- **ç”Ÿæˆæ•°æ®**: å¹³å‡æ¯ä¸ªåœºæ™¯ 36.5æ¡è®°å½•

#### æŒ‰Modalityç±»å‹ (Top 10)
| Modality | æ•°æ®é‡ | è¯´æ˜ |
|----------|--------|------|
| OperationDuration | 233æ¡ | æ“ä½œæ—¶é•¿ |
| PowerOnDuration | 225æ¡ | é€šç”µæ—¶é•¿ |
| AmbientTemp_Auto | 213æ¡ | ç¯å¢ƒæ¸©åº¦ |
| TotalEnergyConsumption | 196æ¡ | æ€»èƒ½è€— |
| WireFeedSpeed_Auto | 153æ¡ | é€ä¸é€Ÿåº¦ |
| SendWireCurrent | 134æ¡ | é€ä¸ç”µæµ |
| ShieldingGasFlow | 125æ¡ | ä¿æŠ¤æ°”æµé‡ |
| WeldingCurrent_Stat | 108æ¡ | ç„Šæ¥ç”µæµç»Ÿè®¡ |
| WeldingVoltage_Auto | 104æ¡ | ç„Šæ¥ç”µå‹ |
| WeldingVoltage_Stat | 102æ¡ | ç„Šæ¥ç”µå‹ç»Ÿè®¡ |

#### æŒ‰è®¾å¤‡ (Top 5)
| è®¾å¤‡ID | æ•°æ®é‡ |
|--------|--------|
| 361-01179 | 149æ¡ |
| 361-900A | 111æ¡ |
| 361-01144 | 110æ¡ |
| 411-123 | 110æ¡ |
| 361-02201 | 97æ¡ |

---

## æ•°æ®è´¨é‡ä¿è¯

### âœ… ç¬¦åˆModalDataå…ƒæ¨¡å‹è§„èŒƒ
æ‰€æœ‰ç”Ÿæˆçš„è®°å½•éƒ½åŒ…å«å¿…éœ€å­—æ®µ:
- `id`: å”¯ä¸€æ ‡è¯†ç¬¦
- `type`: "ModalData"
- `refScene`: åœºæ™¯å¼•ç”¨
- `refTwin`: å­ªç”Ÿä½“å¼•ç”¨
- `refModality`: æ¨¡æ€å¼•ç”¨
- `value`: è§‚æµ‹å€¼ (å¸¦å•ä½)
- `observedAt`: æ—¶é—´æˆ³
- `qualityTag`: è´¨é‡æ ‡ç­¾ (ç»Ÿä¸€ä¸º"OK")
- `provenance`: æº¯æºä¿¡æ¯

### âœ… æ•°æ®åˆç†æ€§
1. **æ—¶é—´æˆ³**: æ‰€æœ‰observedAtéƒ½åœ¨å¯¹åº”Sceneçš„timeFrameèŒƒå›´å†…
2. **æ•°å€¼èŒƒå›´**: æ‰€æœ‰valueéƒ½åœ¨Modalityå®šä¹‰çš„allowedRangeå†…
3. **å…³ç³»ä¸€è‡´æ€§**: refTwinå’ŒrefModalityçš„ç»„åˆéƒ½ç»è¿‡ModalityBindingéªŒè¯
4. **æº¯æºå®Œæ•´**: æ¯æ¡æ•°æ®éƒ½åŒ…å«sourceTwinIdã€methodå’ŒpipelineStage

---

## ç¤ºä¾‹æ•°æ®

```json
{
  "@context": ["https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld"],
  "id": "urn:ngsi-ld:ModalData:WeldingVoltage_Auto.M670-SN001_T01_P0010.001",
  "type": "ModalData",
  "refScene": {
    "type": "Relationship",
    "object": "urn:ngsi-ld:Scene:Process:M670-SN001:T01:P0010:20251028090000"
  },
  "refTwin": {
    "type": "Relationship",
    "object": "urn:ngsi-ld:TwinObject:AutoEquipment:361-01189"
  },
  "refModality": {
    "type": "Relationship",
    "object": "urn:ngsi-ld:Modality:WeldingVoltage_Auto"
  },
  "value": {
    "type": "Property",
    "value": 41.54,
    "unitCode": "V"
  },
  "observedAt": "2025-10-28T09:14:27.098Z",
  "qualityTag": {
    "type": "Property",
    "value": "OK"
  },
  "provenance": {
    "type": "Property",
    "value": {
      "sourceTwinId": "urn:ngsi-ld:TwinObject:AutoEquipment:361-01189",
      "method": "OPC-UA",
      "pipelineStage": "ingest"
    }
  }
}
```

---

## æŠ€æœ¯è¯´æ˜

### åº”å¯¹æ•°æ®ä¸ä¸€è‡´é—®é¢˜
åŸå§‹Sceneä¸­çš„`involvesAsset`å­—æ®µå¼•ç”¨çš„è®¾å¤‡ID (å¦‚`ROBOT-01`, `Worker-01`)ä¸ModalityBindingä¸­çš„å®é™…è®¾å¤‡IDä¸åŒ¹é…ã€‚

**è§£å†³æ–¹æ¡ˆ**: 
- ä¸ºæ¯ä¸ªåœºæ™¯æ™ºèƒ½é€‰æ‹©2-4ä¸ªæœ‰ModalityBindingçš„çœŸå®è®¾å¤‡
- ä¸ºæ¯ä¸ªè®¾å¤‡éšæœºé€‰æ‹©2-4ç§å…¶èƒ½å¤Ÿäº§ç”Ÿçš„Modality
- ç¡®ä¿ç”Ÿæˆçš„æ•°æ®éƒ½æœ‰å®Œæ•´çš„æº¯æºé“¾

è¿™ç§æ–¹æ³•æ—¢ä¿è¯äº†æ•°æ®çš„ç»“æ„å®Œæ•´æ€§ï¼Œåˆäº§ç”Ÿäº†åˆç†çš„æ¨¡æ‹Ÿæ•°æ®ã€‚

### IDå‘½åè§„åˆ™
```
urn:ngsi-ld:ModalData:{ModalityName}.{SceneCode}.{Sequence}

ç¤ºä¾‹:
urn:ngsi-ld:ModalData:WeldingCurrent_Auto.M670-SN001_T01_P0010.001
```

---

## è¾“å‡ºæ–‡ä»¶

**æ–‡ä»¶è·¯å¾„**: `/mnt/user-data/outputs/modaldata_instances.json`

**æ–‡ä»¶ç‰¹æ€§**:
- æ ¼å¼: JSONæ•°ç»„
- ç¼–ç : UTF-8
- å¤§å°: 1.92 MB
- è®°å½•æ•°: 1,971æ¡
- ç¬¦åˆNGSI-LDæ ‡å‡†

---

## åç»­å»ºè®®

1. **æ•°æ®éªŒè¯**: å¯ä½¿ç”¨JSON SchemaéªŒè¯å™¨å¯¹ç…§ModalDataå…ƒæ¨¡å‹è¿›è¡Œå®Œæ•´éªŒè¯
2. **æ•°æ®å¯¼å…¥**: å¯ç›´æ¥å¯¼å…¥åˆ°NGSI-LDå…¼å®¹çš„æ•°å­—å­ªç”Ÿå¹³å°
3. **æ•°æ®æ‰©å±•**: å¦‚éœ€æ›´å¤šæ•°æ®ï¼Œå¯è°ƒæ•´è„šæœ¬ä¸­çš„`num_records`å‚æ•°
4. **æ•°æ®å¤šæ ·æ€§**: å¯è€ƒè™‘æ·»åŠ ä¸åŒçš„qualityTagå€¼ä»¥æ¨¡æ‹Ÿå¼‚å¸¸æƒ…å†µ

---

## æ€»ç»“

âœ¨ æˆåŠŸä¸º54ä¸ªProcessåœºæ™¯æ³¨å…¥äº†"ç”Ÿå‘½"ï¼Œç”Ÿæˆäº†1,971æ¡é«˜è´¨é‡çš„è¿è¡Œæ—¶æ•°æ®ã€‚  
âœ¨ æ‰€æœ‰æ•°æ®éƒ½ç¬¦åˆModalDataå…ƒæ¨¡å‹è§„èŒƒï¼Œå…·æœ‰å®Œæ•´çš„æº¯æºä¿¡æ¯ã€‚  
âœ¨ æ•°æ®å¯ç›´æ¥ç”¨äºæ•°å­—å­ªç”Ÿç³»ç»Ÿçš„æµ‹è¯•ã€æ¼”ç¤ºå’Œå¼€å‘ã€‚

---

*ç”Ÿæˆæ—¶é—´: 2025-10-29*  
*ç”Ÿæˆå·¥å…·: æ•°å­—å­ªç”Ÿæ•°æ®æ¨¡æ‹Ÿå™¨ v1.0*
