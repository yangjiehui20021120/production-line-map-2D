# MBOMå®ä½“å®ä¾‹ç”Ÿæˆ - äº¤ä»˜æ€»ç»“

## âœ… äº¤ä»˜æ¸…å•

### ğŸ“¦ JSONå®ä½“æ–‡ä»¶ï¼ˆ2ä¸ªï¼‰

| æ–‡ä»¶å | å¤§å° | å®ä½“æ•° | åŒ…å«å±‚çº§ |
|--------|------|--------|----------|
| **mbom_M000004670327_entities.json** | 120KB | 119ä¸ª | 1 MBOMRoot + 1 Route + 11 Takt + 27 Process + 79 Step |
| **mbom_M000004803474_entities.json** | 114KB | 115ä¸ª | 1 MBOMRoot + 1 Route + 11 Takt + 27 Process + 75 Step |

**æ€»è®¡**: 234ä¸ªNGSI-LDæ ‡å‡†å®ä½“ï¼Œç¬¦åˆäº”å±‚MBOMæ¶æ„

### ğŸ“„ é…å¥—æ–‡æ¡£ï¼ˆ3ä¸ªï¼‰

| æ–‡æ¡£åç§° | ç”¨é€” | é¡µæ•° |
|---------|------|------|
| **MBOM_Entity_Generation_Documentation.md** | å®Œæ•´æŠ€æœ¯æ–‡æ¡£ | çº¦25é¡µ |
| **MBOM_QuickStart_Guide.md** | å¿«é€Ÿå¼€å§‹æŒ‡å— | çº¦5é¡µ |
| **MBOM_Delivery_Summary.md** | æœ¬äº¤ä»˜æ€»ç»“ | çº¦3é¡µ |

---

## ğŸ¯ å®Œæˆæƒ…å†µ

### âœ… å·²å®Œæˆé¡¹

1. âœ… **æ•°æ®è¯»å–ä¸æ¸…æ´—**
   - ä»4ä¸ªExcelæ–‡ä»¶è¯»å–æºæ•°æ®
   - è‡ªåŠ¨è¿‡æ»¤ç©ºè¡Œå’Œæ— æ•ˆæ•°æ®
   - æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–

2. âœ… **å®ä½“ç”Ÿæˆ**
   - ä¸¥æ ¼æŒ‰ç…§JSON Schemaè§„èŒƒç”Ÿæˆ
   - äº”å±‚æ¶æ„å®Œæ•´å®ç°
   - åŒå‘å…³ç³»æ­£ç¡®å»ºç«‹
   - æ‰€æœ‰å¿…å¡«å­—æ®µå®Œæ•´

3. âœ… **è‡ªåŠ¨å¡«å……é€»è¾‘**
   - ç¼ºå¤±çš„å¿…å¡«å­—æ®µè‡ªåŠ¨ç”Ÿæˆ
   - ç”Ÿæˆè§„åˆ™æ¸…æ™°æ–‡æ¡£åŒ–
   - ç¬¦åˆä¸šåŠ¡è¯­ä¹‰

4. âœ… **è´¨é‡éªŒè¯**
   - JSONæ ¼å¼éªŒè¯é€šè¿‡
   - å®ä½“ç»“æ„éªŒè¯é€šè¿‡
   - å…³ç³»å®Œæ•´æ€§æ£€æŸ¥é€šè¿‡
   - IDå‘½åè§„èŒƒéªŒè¯é€šè¿‡

5. âœ… **æ–‡æ¡£äº¤ä»˜**
   - å®Œæ•´æŠ€æœ¯æ–‡æ¡£
   - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - å­—æ®µæ˜ å°„è¯´æ˜
   - ä½¿ç”¨ç¤ºä¾‹ä»£ç 

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### æºæ•°æ®ç»Ÿè®¡

| æ•°æ®æº | å®é™…æ•°æ®è¡Œ | è¯´æ˜ |
|--------|-----------|------|
| ROUTE_MASTER.xlsx | 2 | 2ä¸ªäº§å“ï¼Œ2æ¡å·¥è‰ºè·¯çº¿ |
| TAKT.xlsx | 22 | æ¯æ¡è·¯çº¿11ä¸ªèŠ‚æ‹ |
| PROC_IN_TAKT.xlsx | 54 | æ¯æ¡è·¯çº¿27ä¸ªå·¥åº |
| STEP_IN_PROC.xlsx | 154 | äº§å“1: 79æ­¥ï¼Œäº§å“2: 75æ­¥ |

### ç”Ÿæˆå®ä½“ç»Ÿè®¡

| äº§å“ä»£ç  | è·¯çº¿ä»£ç  | MBOMRoot | Route | Takt | Process | Step | åˆè®¡ |
|---------|---------|----------|-------|------|---------|------|------|
| M000004670327 | RT_M000004670327 | 1 | 1 | 11 | 27 | 79 | **119** |
| M000004803474 | RT_M000004803474 | 1 | 1 | 11 | 27 | 75 | **115** |
| **æ€»è®¡** | - | **2** | **2** | **22** | **54** | **154** | **234** |

---

## ğŸ”§ è‡ªåŠ¨å¡«å……å­—æ®µè¯´æ˜

### å¿…å¡«å­—æ®µè‡ªåŠ¨ç”Ÿæˆè§„åˆ™

| å±‚çº§ | å­—æ®µ | ç”Ÿæˆè§„åˆ™ | ç¤ºä¾‹ |
|------|------|---------|------|
| **MBOMRoot** | `mbomCode` | `MBOM_{productCode}` | `MBOM_M000004670327` |
| | `mbomName` | `{productCode}ä¾§å¢™åˆ¶é€ BOM` | `M000004670327ä¾§å¢™åˆ¶é€ BOM` |
| | `mbomVersion` | å›ºå®š | `V1.0` |
| | `effectiveFrom` | å›ºå®š | `2025-01-01T00:00:00Z` |
| **Route** | `routeName` | `{productCode}ä¾§å¢™å·¥è‰ºè·¯çº¿` | `M000004670327ä¾§å¢™å·¥è‰ºè·¯çº¿` |
| | `routeVersion` | å›ºå®š | `V1.0` |
| **Takt** | `taktName` (ç¼ºå¤±æ—¶) | `{productCode}ä¾§å¢™ç»„æˆèŠ‚æ‹{seq}` | `M000004670327ä¾§å¢™ç»„æˆèŠ‚æ‹1` |
| **Process** | `procName` (ç¼ºå¤±æ—¶) | `å·¥åº{code}` | `å·¥åº0010` |
| | `procSeqInTakt` (ç¼ºå¤±æ—¶) | é»˜è®¤ | `1` |
| **Step** | `stepName` (ç¼ºå¤±æ—¶) | `å·¥æ­¥{seq}` | `å·¥æ­¥01` |
| | `stdTime` (ç¼ºå¤±æ—¶) | é»˜è®¤ | `0.0` |
| | `stationCode` (ç¼ºå¤±æ—¶) | é»˜è®¤ | `ST-UNKNOWN` |

**é‡è¦æç¤º**: æ‰€æœ‰è‡ªåŠ¨å¡«å……çš„å­—æ®µå’Œè§„åˆ™å·²åœ¨`MBOM_Entity_Generation_Documentation.md`ä¸­è¯¦ç»†è®°å½•ã€‚

---

## ğŸ¨ å®ä½“ç¤ºä¾‹

### MBOMRootç¤ºä¾‹

```json
{
  "@context": [
    "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
    "https://example.com/contexts/mbom-context.jsonld"
  ],
  "id": "urn:ngsi-ld:MBOM:M000004670327:V1.0",
  "type": "MBOM",
  "mbomType": {
    "type": "Property",
    "value": "MBOMRoot"
  },
  "mbomCode": {
    "type": "Property",
    "value": "MBOM_M000004670327"
  },
  "mbomName": {
    "type": "Property",
    "value": "M000004670327ä¾§å¢™åˆ¶é€ BOM"
  },
  "productCode": {
    "type": "Property",
    "value": "M000004670327"
  },
  "status": {
    "type": "Property",
    "value": "active"
  },
  "hasRoute": {
    "type": "Relationship",
    "object": "urn:ngsi-ld:MBOM:RT_M000004670327:V1.0"
  }
}
```

### Stepç¤ºä¾‹ï¼ˆåŒ…å«æ‰€æœ‰å­—æ®µï¼‰

```json
{
  "@context": [
    "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
    "https://example.com/contexts/mbom-context.jsonld"
  ],
  "id": "urn:ngsi-ld:MBOM:M000004670327:T01:P0010:S01",
  "type": "MBOM",
  "mbomType": {
    "type": "Property",
    "value": "Step"
  },
  "stepSeq": {
    "type": "Property",
    "value": 1
  },
  "stepName": {
    "type": "Property",
    "value": "å¼€å·¥å‰å‡†å¤‡"
  },
  "stdTime": {
    "type": "Property",
    "value": 20.0,
    "unitCode": "MIN"
  },
  "stationCode": {
    "type": "Property",
    "value": "BF"
  },
  "partOfProcess": {
    "type": "Relationship",
    "object": "urn:ngsi-ld:MBOM:M000004670327:T01:P0010"
  },
  "processKind": {
    "type": "Property",
    "value": "process"
  }
}
```

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨æŒ‡å—

### 1. å¯¼å…¥åˆ°Context Broker

```bash
# æ–¹å¼1: å•ç‹¬å¯¼å…¥
curl -X POST "http://localhost:1026/ngsi-ld/v1/entityOperations/create" \
  -H "Content-Type: application/ld+json" \
  -d @mbom_M000004670327_entities.json

# æ–¹å¼2: åˆå¹¶å¯¼å…¥
jq -s 'add' mbom_*.json > mbom_all.json
curl -X POST "http://localhost:1026/ngsi-ld/v1/entityOperations/create" \
  -H "Content-Type: application/ld+json" \
  -d @mbom_all.json
```

### 2. æŸ¥è¯¢éªŒè¯

```bash
# æŸ¥è¯¢æ‰€æœ‰MBOMRoot
curl "http://localhost:1026/ngsi-ld/v1/entities?type=MBOM&q=mbomType==%22MBOMRoot%22"

# æŸ¥è¯¢äº§å“1çš„æ‰€æœ‰å®ä½“
curl "http://localhost:1026/ngsi-ld/v1/entities?type=MBOM&q=id~=%22M000004670327%22"
```

---

## ğŸ“‹ Schemaç¬¦åˆæ€§

æ‰€æœ‰ç”Ÿæˆçš„å®ä½“å‡ç¬¦åˆä»¥ä¸‹Schemaè§„èŒƒï¼š

- âœ… `mbom_root_schema.json` - MBOMRootå®ä½“è§„èŒƒ
- âœ… `mbom_route_schema.json` - Routeå®ä½“è§„èŒƒ
- âœ… `mbom_takt_schema.json` - Taktå®ä½“è§„èŒƒ
- âœ… `mbom_process_schema.json` - Processå®ä½“è§„èŒƒ
- âœ… `mbom_step_schema.json` - Stepå®ä½“è§„èŒƒ

**éªŒè¯æ–¹æ³•**:
```bash
ajv validate -s mbom_root_schema.json -d "mbom_M000004670327_entities.json#/0"
```

---

## âš ï¸ é‡è¦æé†’

### ç‰ˆæœ¬ç®¡ç†
- å½“å‰æ‰€æœ‰å®ä½“ç‰ˆæœ¬ä¸º `V1.0`
- ç‰ˆæœ¬æ›´æ–°æ—¶éœ€åŒæ­¥ä¿®æ”¹MBOMRootå’ŒRouteçš„ID
- å»ºè®®å»ºç«‹ç‰ˆæœ¬å˜æ›´æµç¨‹

### æ•°æ®å®Œæ•´æ€§
- Excelä¸­éƒ¨åˆ†å¿…å¡«å­—æ®µç¼ºå¤±ï¼Œå·²æŒ‰è§„åˆ™è‡ªåŠ¨å¡«å……
- å»ºè®®åç»­è¡¥å……å®Œæ•´çš„æºæ•°æ®
- ç‰¹åˆ«æ˜¯`routeName`ã€`taktName`ç­‰æè¿°æ€§å­—æ®µ

### å…³ç³»ç»´æŠ¤
- æ‰€æœ‰åŒå‘å…³ç³»å·²æ­£ç¡®å»ºç«‹
- åˆ é™¤å®ä½“æ—¶éœ€ç»´æŠ¤å…³ç³»å®Œæ•´æ€§
- å»ºè®®ä½¿ç”¨çº§è”åˆ é™¤æœºåˆ¶

---

## ğŸ“ åç»­æ”¯æŒ

### å¦‚éœ€è°ƒæ•´è‡ªåŠ¨å¡«å……è§„åˆ™

ä¿®æ”¹ç”Ÿæˆè„šæœ¬ `/home/claude/generate_mbom_entities.py` ä¸­çš„å¯¹åº”å‡½æ•°ï¼š
- `create_mbom_root()` - MBOMRootç”Ÿæˆé€»è¾‘
- `create_route()` - Routeç”Ÿæˆé€»è¾‘
- `create_takt()` - Taktç”Ÿæˆé€»è¾‘
- `create_process()` - Processç”Ÿæˆé€»è¾‘
- `create_step()` - Stepç”Ÿæˆé€»è¾‘

### æ–‡æ¡£å‚è€ƒ

- **å®Œæ•´æ–‡æ¡£**: `MBOM_Entity_Generation_Documentation.md`
- **å¿«é€ŸæŒ‡å—**: `MBOM_QuickStart_Guide.md`
- **æ¶æ„è¯´æ˜**: `/mnt/project/mbom_schemas_readme.md`

---

## âœ… è´¨é‡ä¿è¯

- âœ… JSONæ ¼å¼éªŒè¯é€šè¿‡
- âœ… Schemaè§„èŒƒç¬¦åˆæ€§éªŒè¯é€šè¿‡
- âœ… åŒå‘å…³ç³»å®Œæ•´æ€§éªŒè¯é€šè¿‡
- âœ… IDå‘½åè§„èŒƒéªŒè¯é€šè¿‡
- âœ… æšä¸¾å€¼æœ‰æ•ˆæ€§éªŒè¯é€šè¿‡
- âœ… å®ä½“æ•°é‡ç»Ÿè®¡æ­£ç¡®

---

**äº¤ä»˜æ—¥æœŸ**: 2025-01-21  
**æ–‡ä»¶æ€»æ•°**: 5ä¸ªï¼ˆ2ä¸ªJSON + 3ä¸ªæ–‡æ¡£ï¼‰  
**å®ä½“æ€»æ•°**: 234ä¸ªNGSI-LDå®ä½“  
**è´¨é‡çŠ¶æ€**: âœ… æ‰€æœ‰éªŒè¯é€šè¿‡ï¼Œå¯ç›´æ¥ä½¿ç”¨

---

ğŸ‰ **æ„Ÿè°¢ä½¿ç”¨MBOMå®ä½“ç”ŸæˆæœåŠ¡ï¼**
